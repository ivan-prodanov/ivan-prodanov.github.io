<!DOCTYPE html>
<html>
<head>
  <title>Market Tracker</title>
  <meta charset="UTF-8" />
</head>
<body>
  <h1>Market Prices</h1>

  <div>
    <strong>ETH Price:</strong> <span id="eth-price">Loading...</span> USD
  </div>
  <div>
    <strong>SBET Stock Price:</strong> <span id="sbet-price">Loading...</span> USD
  </div>
  
<script>
  async function fetchETH() {
    try {
      const res = await fetch("https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd");
      const data = await res.json();
      document.getElementById("eth-price").textContent = data.ethereum.usd.toFixed(2);
    } catch (err) {
      document.getElementById("eth-price").textContent = "Error";
    }
  }

  async function fetchSBET() {
    try {
      const res = await fetch("https://api.allorigins.win/get?url=" + encodeURIComponent("https://query1.finance.yahoo.com/v7/finance/quote?symbols=SBET"));
      const data = await res.json();
      const parsed = JSON.parse(data.contents);
      const price = parsed.quoteResponse.result[0]?.regularMarketPrice;
      document.getElementById("sbet-price").textContent = price ? price.toFixed(2) : "Unavailable";
    } catch (err) {
      document.getElementById("sbet-price").textContent = "Error";
    }
  }

  fetchETH();
  fetchSBET();
  setInterval(() => { fetchETH(); fetchSBET(); }, 60000);
</script>

</body>
</html>
